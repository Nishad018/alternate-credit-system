<!DOCTYPE html>
<html>
<head>
<title>Finance</title>
<link rel="stylesheet" href="css/style.css">
</head>

<body>

<div id="google_translate_element"></div>
<!-- Progress Bar -->
<div class="progress-container">
  <div class="progress-bar" id="progressBar"></div>
</div>


<div class="container">

<h2>Financial Details</h2>

<label>Income</label>
<button onclick="speak('Income')">ðŸ”Š</button>
<input type="number" class="numberOnly" id="income" min="0" inputmode="numeric">

<label>Expenses</label>
<button onclick="speak('Expenses')">ðŸ”Š</button>
<input type="number" class="numberOnly" id="expenses" min="0" inputmode="numeric">

<label>Savings</label>
<button onclick="speak('Savings')">ðŸ”Š</button>
<input type="number" class="numberOnly" id="savings" min="0" inputmode="numeric">

<!-- AUTO BALANCE DISPLAY -->
<p id="balanceDisplay" style="font-weight:bold;margin-top:10px;"></p>

<hr>

<h3>Documents</h3>

<div id="docContainer"></div>

<button onclick="addDocument()">Add Document</button>

<hr>

<!-- BUSINESS INPUTS -->
<div id="businessSection" style="display:none">

<h3>Business Inputs</h3>

<label>SHG Loan Details</label>
<input type="text" placeholder="Enter SHG Loan Details">
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx">

<br><br>

<label>Manufacturing Cost</label>
<input type="text" placeholder="Enter Manufacturing Cost Details">
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx">

<br><br>

<label>Sales Invoice</label>
<input type="text" placeholder="Enter Sales Invoice Details">
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx">

<br><br>

<label>Additional Business Document</label>
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx" multiple>

</div>

<!-- INDIVIDUAL INPUTS -->
<div id="individualSection" style="display:none">

<h3>Individual Inputs</h3>

<label>Salary Slips</label>
<input type="text" placeholder="Enter salary slip details">
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx">

<br><br>

<label>Employer Certificate</label>
<input type="text" placeholder="Enter employer certificate details">
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx">

<br><br>

<label>Additional Document</label>
<input type="file" accept=".pdf,.jpg,.png,.doc,.docx">

</div>

<br><br>

<button onclick="goNext('collateral.html')">Next</button>

</div>

<script src="js/navigation.js"></script>
<script src="js/voice.js"></script>
<script src="js/documents.js"></script>

<!-- USER TYPE DISPLAY -->
<script>
let type = localStorage.getItem("userType");

if(type === "business"){
document.getElementById("businessSection").style.display="block";
}
else{
document.getElementById("individualSection").style.display="block";
}
</script>

<!-- NUMBER VALIDATION + AUTO CALCULATION -->
<script>

// Restrict only numbers
document.querySelectorAll(".numberOnly").forEach(input=>{
input.addEventListener("input",()=>{
input.value = input.value.replace(/[^0-9]/g,'');
calculateBalance();
});
});

// Auto balance calculation
function calculateBalance(){

let income = parseInt(document.getElementById("income").value) || 0;
let expenses = parseInt(document.getElementById("expenses").value) || 0;

let balance = income - expenses;

let display = document.getElementById("balanceDisplay");

if(income === 0 && expenses === 0){
display.innerHTML = "";
return;
}

if(balance < 0){
display.style.color = "red";
display.innerHTML = "âš  Expenses exceed income by â‚¹" + Math.abs(balance);
}
else{
display.style.color = "green";
display.innerHTML = "âœ” Net Balance: â‚¹" + balance;
}

}

</script>

<!-- GOOGLE TRANSLATE -->
<script>
function googleTranslateElementInit() {
new google.translate.TranslateElement(
{pageLanguage:'en',includedLanguages:'en,hi,mr'},
'google_translate_element');
}
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>
updateProgress('finance.html');
</script>

</body>
</html>
